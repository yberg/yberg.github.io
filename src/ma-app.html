<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html"><link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html"><link rel="import" href="../bower_components/app-layout/app-header/app-header.html"><link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html"><link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html"><link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html"><link rel="import" href="../bower_components/app-route/app-location.html"><link rel="import" href="../bower_components/app-route/app-route.html"><link rel="import" href="../bower_components/app-storage/app-localstorage/app-localstorage-document.html"><link rel="import" href="../bower_components/iron-pages/iron-pages.html"><link rel="import" href="../bower_components/iron-selector/iron-selector.html"><link rel="import" href="../bower_components/iron-ajax/iron-ajax.html"><link rel="import" href="../bower_components/iron-meta/iron-meta.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/polymerfire/firebase-app.html"><link rel="import" href="../bower_components/polymerfire/firebase-messaging.html"><link rel="import" href="ma-icons.html"><link rel="lazy-import" href="ma-activity.html"><link rel="lazy-import" href="ma-login.html"><link rel="lazy-import" href="ma-event.html"><link rel="lazy-import" href="ma-events.html"><link rel="lazy-import" href="ma-program.html"><link rel="lazy-import" href="ma-program-item.html"><link rel="lazy-import" href="ma-profile.html"><link rel="lazy-import" href="ma-view404.html"></head><body><dom-module id="ma-app"><template><style>:host{display:block;--app-drawer-content-container:{background:var(--app-drawer-background, #fff);};}a.back-btn{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;}:host(:not([page="program-item"]):not([page="event"])) .back-btn{display:none;}:host([page="program-item"]) .menu-btn,
      :host([page="event"]) .menu-btn{display:none;}app-drawer-layout:not([narrow]) [drawer-toggle]{display:none;}app-header{color:var(--app-header-color, white);background-color:var(--app-primary-color);}app-header paper-icon-button{--paper-icon-button-ink-color:white;}app-drawer app-toolbar{color:var(--app-drawer-color, black);}.drawer-list{margin:0 16px;}.drawer-list a{display:block;padding:0 16px;text-decoration:none;color:var(--app-drawer-color, black);line-height:48px;outline:none;font-size:16px;}.drawer-list a.iron-selected{font-weight:bold;}.text-center{text-align:center;}.back-btn{color:white;}</style><iron-meta id="meta" key="env" value="[[env]]"></iron-meta><app-localstorage-document key="user" data="{{user}}"></app-localstorage-document><app-location route="{{route}}" url-space-regex="^[[rootPath]]"></app-location><app-route route="{{route}}" pattern="[[rootPath]]:page" data="{{routeData}}" tail="{{subroute}}"></app-route><app-drawer-layout fullbleed="" narrow="{{narrow}}"><app-drawer id="drawer" slot="drawer" swipe-open="[[narrow]]"><app-toolbar>Menu</app-toolbar><iron-selector selected="[[page]]" attr-for-selected="name" class="drawer-list" role="navigation"><a name="activity" href="[[rootPath]]activity">Aktivitetsfl√∂de</a> <a name="program" href="[[rootPath]]program">Program</a> <a name="profile" href="[[rootPath]]profile">Min information</a> <a name="events" href="[[rootPath]]events">Event</a> <a name="login" href="[[rootPath]]login">Logga in</a></iron-selector></app-drawer><app-header-layout has-scrolling-region=""><app-header slot="header" effects="waterfall" condenses="" reveals=""><app-toolbar><paper-icon-button class="menu-btn" icon="ma-icons:menu" drawer-toggle=""></paper-icon-button><a class="back-btn" href="[[rootPath]][[_getBackLink(page)]]" tabindex="-1"><paper-icon-button icon="ma-icons:arrow-back" aria-label="Go back"></paper-icon-button></a><div main-title="" class="text-center">[[page]]</div><paper-icon-button tabindex="-1"></paper-icon-button></app-toolbar></app-header><iron-pages selected="[[page]]" selected-attribute="active" attr-for-selected="name" fallback-selection="view404" role="main"><ma-activity name="activity"></ma-activity><ma-event name="event" route="[[subroute]]"></ma-event><ma-events name="events"></ma-events><ma-login name="login"></ma-login><ma-program name="program"></ma-program><ma-program-item name="program-item" route="[[subroute]]"></ma-program-item><ma-profile name="profile"></ma-profile><ma-view404 name="view404"></ma-view404></iron-pages></app-header-layout></app-drawer-layout><iron-ajax id="applicationInfoRequest" url="[[env.apiUrl]]/Client/GetApplicationInfo" method="post" content-type="application/x-www-form-urlencoded" handle-as="json" on-response="_handleApplicationInfoResponse"></iron-ajax><firebase-app id="firebase" auth-domain="meetapp-371c7.firebaseapp.com" database-url="https://meetapp-371c7.firebaseio.com" api-key="AIzaSyDTP-AIzaSyBkOqkszYULZesZWFd7mYX8bUB1WZEo04o" messaging-sender-id="530746210925"></firebase-app></template><script>class MaApp extends Polymer.Element{static get is(){return'ma-app'}static get properties(){return{env:{type:Object,value:{appId:1,apiUrl:'https://meetappdev.cloudapp.net'}},page:{type:String,reflectToAttribute:!0,observer:'_pageChanged'},rootPath:String,routeData:Object,subroute:String,user:{type:Object,value:()=>({})}}}static get observers(){return['_routePageChanged(routeData.page)']}ready(){super.ready();try{if(!window.localStorage.applicationInfo)throw new Error;const a=JSON.parse(window.localStorage.applicationInfo);if(a.appId==this.env.appId)this._initApplicationConfig();else throw new Error}catch(a){this._getApplicationInfo()}}_routePageChanged(a){this.page=a||'program',this.$.drawer.persistent||this.$.drawer.close()}_pageChanged(a){var b=this.resolveUrl('ma-'+a+'.html');Polymer.importHref(b,null,this._showPage404.bind(this),!0)}_showPage404(){this.page='view404'}_getBackLink(a){return'program-item'===a?'program':'event'===a?'events':''}_userLoaded(){console.log('user',this.user),this.user&&this.user.sessionIdentifier||(window.history.pushState({},null,'/login'),window.dispatchEvent(new CustomEvent('location-changed')))}_getApplicationInfo(){this.$.applicationInfoRequest.body={appId:this.env.appId},this.$.applicationInfoRequest.generateRequest()}_handleApplicationInfoResponse(a){const b=a.detail.response;window.localStorage.setItem('applicationInfo',JSON.stringify(Object.assign({appId:this.env.appId},b))),this._initApplicationConfig(b)}_initApplicationConfig(a){a||(a=JSON.parse(window.localStorage.getItem('applicationInfo')));var b=document.getElementsByTagName('html')[0];b.style.setProperty('--app-primary-color',a.colorProfile.TopNavBackgroundColor),b.style.setProperty('--app-header-color',a.colorProfile.TopNavForegroundColor),b.style.setProperty('--app-main-background',`url(${a.startBackgroundImageUri})`),b.style.setProperty('--app-drawer-background',a.colorProfile.MenuBackgroundColor),b.style.setProperty('--app-drawer-color',a.colorProfile.MenuForegroundColor)}}window.customElements.define(MaApp.is,MaApp);</script></dom-module></body></html>