<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/iron-meta/iron-meta.html"><link rel="import" href="../bower_components/iron-pages/iron-pages.html"><link rel="import" href="../bower_components/iron-ajax/iron-ajax.html"><link rel="lazy-import" href="ma-main.html"><link rel="lazy-import" href="ma-login.html"><link rel="import" href="../config/config.html"></head><body><dom-module id="ma-app"><template><iron-meta key="env" value="[[env]]"></iron-meta><iron-pages selected="[[page]]" attr-for-selected="name" role="main"><ma-main name="main"></ma-main><ma-login name="login"></ma-login></iron-pages></template><script>class MaApp extends Polymer.Element{static get is(){return'ma-app'}static get properties(){return{env:{type:Object,value:env},page:{type:String,reflectToAttribute:!0,observer:'_pageChanged'},user:Object}}constructor(){super();try{const a=JSON.parse(localStorage.getItem('user')),b=localStorage.getItem('auth');if(!a||!Object.keys(a).length||!b)throw new Error;else this.page='main'}catch(a){this.page='login'}this._pageChanged(this.page)}ready(){super.ready(),this._initApplicationConfig(env),window.addEventListener('user-logged-in',(a)=>{const{user:b}=a.detail;b&&this.set('page','main')}),window.addEventListener('user-logged-out',()=>{this.set('page','login')})}_pageChanged(a){var b=this.resolveUrl('ma-'+a+'.html');Polymer.importHref(b,null,null,!0)}_initApplicationConfig(a){if(!a)try{a=JSON.parse(localStorage.getItem('applicationInfo'))}catch(a){return}const b=document.documentElement.style;b.setProperty('--app-primary-color',a.colorProfile.TopNavBackgroundColor),b.setProperty('--app-header-color',a.colorProfile.TopNavForegroundColor),b.setProperty('--app-main-background',`url(${a.startBackgroundImageUri})`),b.setProperty('--app-drawer-background',a.colorProfile.MenuBackgroundColor),b.setProperty('--app-drawer-color',a.colorProfile.MenuForegroundColor),document.getElementsByTagName('meta')['theme-color'].content=a.colorProfile.TopNavBackgroundColor}_has(a){return!!a}}window.customElements.define(MaApp.is,MaApp);</script></dom-module></body></html>