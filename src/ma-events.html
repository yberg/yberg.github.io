<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-storage/app-localstorage/app-localstorage-document.html"><link rel="import" href="../bower_components/iron-list/iron-list.html"><link rel="import" href="../bower_components/iron-meta/iron-meta.html"><link rel="import" href="../bower_components/paper-ripple/paper-ripple.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/paper-item/paper-item.html"><link rel="import" href="../bower_components/paper-item/paper-item-body.html"><link rel="import" href="../bower_components/paper-button/paper-button.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/paper-input/paper-input.html"><link rel="import" href="ma-header-layout.html"><link rel="import" href="ma-event-data.html"><link rel="import" href="ma-spinner.html"><link rel="import" href="ma-icons.html"><link rel="import" href="shared-styles.html"></head><body><dom-module id="ma-events"><template><style include="shared-styles">iron-list{height:calc(100vh - 258px);padding:0 0 16px;}.info{box-sizing:border-box;padding:16px 32px;height:192px;border-bottom:1px solid #ddd;overflow:hidden;}#cancelButton{position:fixed;bottom:0;left:0;width:100%;height:50px;background:var(--app-primary-color);color:white;border-radius:0;margin:0;}</style><ma-event-data id="eventData" events="{{events}}" loading="{{loading}}"></ma-event-data><ma-spinner loading="[[loading]]"></ma-spinner><div class="info"><h1 class="text-center">Välj ett event</h1><div class="text-center">Välj event nedan eller ange eventkod för privat event</div><paper-input label="Eventkod" value="{{eventCode}}" on-keypress="_keyPressed" type="number" no-label-float=""><paper-icon-button icon="ma-icons:search" slot="suffix" on-tap="_search"></paper-icon-button></paper-input></div><iron-list items="[[events]]" as="event" class="condense"><template><a href="[[rootPath]]event/[[event.Id]]" class="paper-item-link"><paper-item><img src="[[event.ListLogoUrl]]" alt=""><paper-item-body two-line=""><div>[[event.Name]]</div><div secondary="">[[event.Description]]</div></paper-item-body><paper-ripple></paper-ripple></paper-item></a></template></iron-list><paper-button id="cancelButton" raised="" on-tap="_cancel"><iron-icon></iron-icon>Senare<iron-icon icon="ma-icons:chevron-right"></iron-icon></paper-button></template><script>class MaEvents extends Polymer.Element{static get is(){return'ma-events'}static get properties(){return{events:Object,eventCode:Number,loading:Boolean,user:Object}}ready(){super.ready(),this.$.eventData.addEventListener('search-result',(a)=>{const b=a.detail.event;b?(window.history.pushState({event:b,code:this.eventCode},null,`/event/${b.Id}`),window.dispatchEvent(new CustomEvent('location-changed'))):alert('not found'),console.log('FOUND',a.detail.event)})}_cancel(){window.history.pushState({},null,'/'),window.dispatchEvent(new CustomEvent('location-changed'))}_handleResponse(a){const b=a.detail.response;console.log('events',b),this.set('events',b)}_search(){this.$.eventData.searchEvent(this.eventCode)}_keyPressed(a){13===a.charCode&&this._search()}}window.customElements.define(MaEvents.is,MaEvents);</script></dom-module></body></html>