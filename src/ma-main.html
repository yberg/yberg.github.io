<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html"><link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html"><link rel="import" href="../bower_components/app-route/app-location.html"><link rel="import" href="../bower_components/app-route/app-route.html"><link rel="import" href="../bower_components/iron-pages/iron-pages.html"><link rel="import" href="../bower_components/iron-selector/iron-selector.html"><link rel="import" href="../bower_components/iron-meta/iron-meta.html"><link rel="import" href="../bower_components/iron-icon/iron-icon.html"><link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"><link rel="import" href="../bower_components/polymerfire/firebase-app.html"><link rel="import" href="../bower_components/paper-listbox/paper-listbox.html"><link rel="import" href="../bower_components/paper-item/paper-item.html"><link rel="import" href="../bower_components/paper-item/paper-item-body.html"><link rel="import" href="../bower_components/paper-item/paper-icon-item.html"><link rel="import" href="ma-icons.html"><link rel="import" href="mixins/ma-moment-mixin.html"><link rel="lazy-import" href="ma-activity.html"><link rel="lazy-import" href="ma-chat.html"><link rel="lazy-import" href="ma-dialogue.html"><link rel="lazy-import" href="ma-dialogue-item.html"><link rel="lazy-import" href="ma-event.html"><link rel="lazy-import" href="ma-events.html"><link rel="lazy-import" href="ma-inbox.html"><link rel="lazy-import" href="ma-program.html"><link rel="lazy-import" href="ma-program-item.html"><link rel="lazy-import" href="ma-profile.html"><link rel="lazy-import" href="ma-push.html"><link rel="lazy-import" href="ma-view404.html"></head><body><dom-module id="ma-main"><template><style>:host{display:block;--app-drawer-content-container:{background:var(--app-drawer-background, white);};--app-drawer-width:288px;}:host(:not([page="program-item"]):not([page="event"]):not([page="dialogue-item"])) .back-btn{display:none;}:host([page="program-item"]) .menu-btn,
      :host([page="event"]) .menu-btn,
      :host([page="dialogue-item"]) .menu-btn{display:none;}app-drawer-layout:not([narrow]) [drawer-toggle]{display:none;}app-drawer app-toolbar{color:var(--app-drawer-color, black);}app-drawer app-toolbar [main-title]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}app-drawer paper-item a,
      app-drawer paper-icon-item a,
      app-drawer iron-icon{color:var(--app-drawer-color, black);}paper-listbox{background:transparent;}paper-listbox .divider{width:100%;margin:8px 0;height:1px;background:rgba(255, 255, 255, .25);}paper-item, paper-icon-item{padding:0 16px;height:48px;--paper-item-selected:{background:rgba(255, 255, 255, .12);};}paper-listbox a{width:100%;height:48px;padding:0;line-height:48px;text-decoration:none;color:white;}a{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;outline:none;}.event-info{height:inherit;}.event-info-content{display:flex;align-items:center;height:inherit;color:var(--app-drawer-color, black);line-height:16px;}.event-info img{width:48px;height:48px;margin-right:16px;}</style><iron-meta id="meta" key="env" value="{{env}}"></iron-meta><app-localstorage-document key="instanceInfo" data="{{instanceInfo}}"></app-localstorage-document><app-localstorage-document key="auth" data="{{auth}}"></app-localstorage-document><app-location route="{{route}}" url-space-regex="^[[rootPath]]"></app-location><app-route route="{{route}}" pattern="[[rootPath]]:page" data="{{routeData}}" tail="{{subroute}}"></app-route><app-drawer-layout fullbleed="" narrow="{{narrow}}"><app-drawer id="drawer" slot="drawer" swipe-open="[[narrow]]"><app-toolbar><div main-title="">[[env.Name]]</div><paper-icon-button icon="ma-icons:inbox" on-tap="_gotoInbox" tabindex="-1"></paper-icon-button><paper-icon-button icon="ma-icons:account-circle" on-tap="_gotoProfile" tabindex="-1"></paper-icon-button></app-toolbar><paper-listbox selected="[[page]]" attr-for-selected="name" on-iron-activate="_drawerSelected"><paper-item name="event-info" class="event-info"><a href="[[rootPath]]event/[[instanceInfo.Id]]" class="event-info-content paper-item-link"><img src="[[instanceInfo.ListLogoUrl]]" alt=""><paper-item-body two-line=""><div>[[instanceInfo.Name]]</div><div secondary="">[[format(instanceInfo.StartDate, 'date')]]</div><div>[[instanceInfo.City]]</div></paper-item-body></a></paper-item><div class="divider"></div><paper-item name="activity"><a href="[[rootPath]]activity">Aktivitetsfl√∂de</a></paper-item><paper-item name="program"><a href="[[rootPath]]program">Program</a></paper-item><paper-item name="push"><a href="[[rootPath]]push">Push</a></paper-item><paper-item name="dialogue"><a href="[[rootPath]]dialogue">Dialog</a></paper-item><div class="divider"></div><paper-icon-item name="events"><iron-icon icon="ma-icons:swap-horiz" slot="item-icon"></iron-icon><a href="[[rootPath]]events">Byt event</a></paper-icon-item></paper-listbox></app-drawer><iron-pages selected="[[page]]" selected-attribute="active" attr-for-selected="name" fallback-selection="view404" role="main"><ma-activity name="activity"></ma-activity><ma-chat name="chat" route="[[subroute]]"></ma-chat><ma-event name="event" route="[[subroute]]"></ma-event><ma-events name="events"></ma-events><ma-dialogue name="dialogue"></ma-dialogue><ma-dialogue-item name="dialogue-item" route="[[subroute]]"></ma-dialogue-item><ma-inbox name="inbox" route="[[subroute]]"></ma-inbox><ma-profile name="profile"></ma-profile><ma-program name="program"></ma-program><ma-program-item name="program-item" route="[[subroute]]"></ma-program-item><ma-push name="push"></ma-push><ma-view404 name="view404"></ma-view404></iron-pages></app-drawer-layout><iron-ajax id="instanceInfoRequest" url="[[env.apiUrl]]/Application/GetCurrentInstanceInformation" handle-as="json" last-response="{{instanceInfo}}"></iron-ajax><firebase-app id="firebase" database-url="https://meetapp-dev-chat.firebaseio.com" api-key="AIzaSyA6vFuEYaZXgz9jfSnZmudjjJQ3Qb8e7q4" auth-domain="meetapp-dev-chat.firebaseapp.com" messaging-sender-id="642595179147"></firebase-app></template><script>class MaMain extends MaMomentMixin(Polymer.Element){static get is(){return'ma-main'}static get properties(){return{page:{type:String,reflectToAttribute:!0,observer:'_pageChanged'},rootPath:String,routeData:Object,subroute:String,instanceInfo:Object,auth:{type:String,observer:'_authChanged'}}}static get observers(){return['_routePageChanged(routeData.page)']}ready(){super.ready(),window.addEventListener('open-drawer',()=>{this.$.drawer.persistent||this.$.drawer.open()}),window.addEventListener('event-changed',(a)=>{const{event:b}=a.detail;this.set('instanceInfo',b)})}connectedCallback(){super.connectedCallback();try{const a=JSON.parse(localStorage.getItem('instanceInfo'));if(!a||!Object.keys(a).length)throw new Error;else this.set('instanceInfo',a)}catch(a){this.$.instanceInfoRequest.params={auth:JSON.parse(localStorage.getItem('auth'))},this.$.instanceInfoRequest.generateRequest()}}_routePageChanged(a){this.page=a||'program',this._drawerSelected()}_drawerSelected(){this.$.drawer.persistent||this.$.drawer.close()}_pageChanged(a){var b=this.resolveUrl('ma-'+a+'.html');Polymer.importHref(b,null,this._showPage404.bind(this),!0)}_showPage404(){this.page='view404'}_authChanged(a){a||window.dispatchEvent(new CustomEvent('user-logged-out'))}_gotoInbox(){window.history.pushState({},null,'/inbox'),window.dispatchEvent(new CustomEvent('location-changed'))}_gotoProfile(){window.history.pushState({},null,'/profile'),window.dispatchEvent(new CustomEvent('location-changed'))}}window.customElements.define(MaMain.is,MaMain);</script></dom-module></body></html>