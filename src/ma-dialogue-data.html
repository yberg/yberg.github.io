<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html"><link rel="import" href="../bower_components/app-storage/app-localstorage/app-localstorage-document.html"><link rel="import" href="../bower_components/iron-meta/iron-meta.html"><link rel="import" href="../bower_components/iron-ajax/iron-ajax.html"></head><body><dom-module id="ma-dialogue-data"><template><iron-meta key="env" value="{{env}}"></iron-meta><app-localstorage-document key="auth" data="{{auth}}"></app-localstorage-document><app-indexeddb-mirror key="dialogue" data="{{liveDialogue}}" persisted-data="{{dialogue}}"></app-indexeddb-mirror><iron-ajax auto="" url="[[env.apiUrl]]/Notification/ListNotification?auth=[[auth]]" method="post" content-type="application/x-www-form-urlencoded" handle-as="json" last-response="{{liveDialogue}}" loading="{{loading}}"></iron-ajax><iron-ajax id="feedbackRequest" method="post" content-type="application/x-www-form-urlencoded" handle-as="json" on-response="_handleFeedbackResponse" loading="{{loading}}"></iron-ajax></template><script>class MaDialogueData extends Polymer.Element{static get is(){return'ma-dialogue-data'}static get properties(){return{itemId:String,dialogue:{type:Object,value:()=>({}),notify:!0},item:{type:Object,value:()=>({}),computed:'_getDialogueItem(dialogue, itemId)',notify:!0},loading:{type:Boolean,value:!1,notify:!0}}}_getDialogueItem(a,b){if(!a||!a.Notifications)return null;const c=(a.Notifications||[]).find((a)=>a.Id==b);return console.log('item',c),c}sendTextResponse(a,b){this.$.feedbackRequest.url=`${this.env.apiUrl}/Notification/PostTextFeedback`,this.$.feedbackRequest.body={auth:this.auth,notificationId:a,text:b},this.$.feedbackRequest.generateRequest()}sendOptionResponse(a,b){this.$.feedbackRequest.url=`${this.env.apiUrl}/Notification/PostOptionFeedback`,this.$.feedbackRequest.body={auth:this.auth,notificationId:a,optionIds:b},this.$.feedbackRequest.generateRequest()}sendMultiOptionResponse(a,b){this.$.feedbackRequest.url=`${this.env.apiUrl}/Notification/PostOptionFeedback`;let c=`auth=${this.auth}&notificationId=${a}`;b.forEach((a)=>{c+=`&optionIds=${a}`}),this.$.feedbackRequest.body=c,this.$.feedbackRequest.generateRequest()}_handleFeedbackResponse(){this.dispatchEvent(new CustomEvent('sent-response'))}}window.customElements.define(MaDialogueData.is,MaDialogueData);</script></dom-module></body></html>