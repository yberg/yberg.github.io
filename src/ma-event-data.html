<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-storage/app-indexeddb-mirror/app-indexeddb-mirror.html"><link rel="import" href="../bower_components/app-storage/app-localstorage/app-localstorage-document.html"><link rel="import" href="../bower_components/iron-ajax/iron-ajax.html"><link rel="import" href="../bower_components/iron-meta/iron-meta.html"><link rel="import" href="ma-storage.html"><link rel="import" href="ma-spinner.html"></head><body><dom-module id="ma-event-data"><template><iron-meta key="env" value="{{env}}"></iron-meta><app-localstorage-document key="auth" data="{{auth}}"></app-localstorage-document><app-indexeddb-mirror key="events" data="{{liveEvents}}" persisted-data="{{events}}"></app-indexeddb-mirror><ma-spinner loading="[[loading]]"></ma-spinner><iron-ajax auto="" url="[[env.apiUrl]]/MobileAuth/ListApplicationInstances?auth=[[auth]]" content-type="application/x-www-form-urlencoded" handle-as="json" last-response="{{liveEvents}}" loading="{{loading}}"></iron-ajax><iron-ajax id="searchEventRequest" url="[[env.apiUrl]]/MobileAuth/GetEventByEventCode" handle-as="json" on-response="_handleSearchEventResponse" loading="{{loading}}"></iron-ajax></template><script>class MaEventData extends Polymer.Element{static get is(){return'ma-event-data'}static get properties(){return{id:String,events:{type:Array,value:()=>[],notify:!0},event:{type:Object,value:()=>({}),computed:'_getEvent(events, id)',notify:!0},loading:{type:Boolean,value:!1,notify:!0}}}_getEvent(a,b){const c=(a||[]).find((a)=>a.Id==b);return console.log('event',c),c}searchEvent(a){this.$.searchEventRequest.params={auth:this.auth,eventCode:a},this.$.searchEventRequest.generateRequest()}_handleSearchEventResponse(a){const b=a.detail.response;this.dispatchEvent(new CustomEvent('search-result',{detail:{event:b}}))}}window.customElements.define(MaEventData.is,MaEventData);</script></dom-module></body></html>