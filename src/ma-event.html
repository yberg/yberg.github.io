<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-route/app-route.html"><link rel="import" href="../bower_components/app-storage/app-localstorage/app-localstorage-document.html"><link rel="import" href="../bower_components/iron-icon/iron-icon.html"><link rel="import" href="../bower_components/iron-ajax/iron-ajax.html"><link rel="import" href="../bower_components/paper-card/paper-card.html"><link rel="import" href="../bower_components/paper-button/paper-button.html"><link rel="import" href="ma-event-data.html"></head><body><dom-module id="ma-event"><template><style>:host{display:flex;flex-direction:column;min-height:calc(100vh - 114px);padding-bottom:50px;--paper-card:{margin:8px;};}.activate-button{position:fixed;bottom:0;left:0;width:100%;height:50px;background:var(--app-primary-color);color:white;border-radius:0;margin:0;}.activate-button[disabled]{opacity:0.5;}</style><iron-meta key="env" value="{{env}}"></iron-meta><app-localstorage-document key="sessionIdentifier" data="{{sessionIdentifier}}"></app-localstorage-document><iron-ajax id="activateRequest" url="[[env.apiUrl]]/MobileAuth/ChangeInstance?auth=[[sessionIdentifier]]" method="post" content-type="application/x-www-form-urlencoded" handle-as="json" on-response="_handleActivateResponse" loading="{{loading}}"></iron-ajax><app-route route="[[route]]" pattern="/:id" data="{{routeData}}"></app-route><ma-event-data id="[[routeData.id]]" event="{{event}}"></ma-event-data><paper-card heading="[[event.Name]]"><div class="card-content">[[event.Description]]</div></paper-card><paper-button raised="" class="activate-button" on-tap="_activate" disabled$="[[loading]]"><iron-icon></iron-icon>Aktivera event<iron-icon icon="ma-icons:chevron-right"></iron-icon></paper-button></template><script>class MaEvent extends Polymer.Element{static get is(){return'ma-event'}static get properties(){return{event:{type:Object,value:()=>{}},events:Array,loading:{type:Boolean,value:!1},user:Object}}_activate(){this.$.activateRequest.body={applicationInstanceId:this.event.Id},this.$.activateRequest.generateRequest()}_handleActivateResponse(a){const b=a.detail.response;console.log('res',b),b.Valid&&this.set('sessionIdentifier',b.SessionIdentifier)}}window.customElements.define(MaEvent.is,MaEvent);</script></dom-module></body></html>